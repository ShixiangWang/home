<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"> 
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> 
    
    <link rel="stylesheet" href="../../../fonts/academicons-1.8.6/css/academicons.min.css"/>
    <link rel="icon" type="image/png" sizes="32x32" href="../../../logo/bodhi.png"> 
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    
    
    <title>Shellè„šæœ¬ä¹‹å¤„ç†ç”¨æˆ·è¾“å…¥ - ç‹è¯—ç¿”</title>
    
     
    <meta property="og:title" content="Shellè„šæœ¬ä¹‹å¤„ç†ç”¨æˆ·è¾“å…¥ - Shixiang Wang | ç‹è¯—ç¿”">
    

    
      
    

    

    
    


<link href='//cdn.bootcss.com/highlight.js/9.12.0/styles/Xcode.min.css' rel='stylesheet' type='text/css' />



    <link rel="stylesheet" href="../../../css/style.css" />
    <link rel="stylesheet" href="../../../css/mystyle.css" /> 
    <link rel="stylesheet" href="../../../css/fonts.css" />
    
<script async src="../../../js/load-typekit.js"></script>


<link rel="stylesheet" href="../../../css/custom.css" />

  </head>
  
  <body class="cn">
    <header class="masthead">
      

<h1><a href="../../../logo/ShixiangWang.png"><img src="../../../logo/ShixiangWang.png" alt="Shixiang Wang" /></a></h1>
<p align="right" style="margin-top:-50px;"><small>><i>ä¸Šå£«é—»é“<br>å‹¤è€Œè¡Œä¹‹</i></small></p>




      <nav class="menu">
        <input id="menu-check" type="checkbox" />
        <label id="menu-label" for="menu-check" class="unselectable">
          <span class="icon close-icon">âœ•</span>
          <span class="icon open-icon">â˜°</span>
          <span class="text">Menu</span>
        </label>
        <ul>
        
        
        <li><a href="../../../">é¦–é¡µ</a></li>
        
        <li><a href="../../../cn/about/">å…³äº</a></li>
        
        <li><a href="../../../cn/post/">åšå®¢</a></li>
        
        <li><a href="../../../cn/read/">è¯»ä¹¦</a></li>
        
        <li><a href="../../../cn/writing">å†™ä½œ</a></li>
        
        <li><a href="../../../cn/research/">ç ”ç©¶</a></li>
        
        <li><a href="../../../cn/tools/">å·¥å…·</a></li>
        
        <li><a href="../../../cn/cv-cn/shixiang">ç®€å†</a></li>
        
        <li><a href="../../../logo/qrcode.jpg">å…¬ä¼—å·</a></li>
        
        <li><a href="https://www.zhihu.com/people/shixiangwang">çŸ¥ä¹</a></li>
        
        <li><a href="../../../cn/mark">æ¨èé˜…è¯»</a></li>
        
        <li><a href="../../../en/">English</a></li>
        
        <li><a href="../../../categories/">åˆ†ç±»</a></li>
        
        <li><a href="../../../tags/">æ ‡ç­¾</a></li>
        
        

<li class="menu-extra"></li>



<li><a href="https://github.com/ShixiangWang/home/edit/master/content/cn/post/2017-08-19-working-with-user-input.md" target="_blank">ç¼–è¾‘</a></li>


<li><a href="../../../cn/index.xml" type="application/rss+xml" title="RSS feed">è®¢é˜…</a></li>

<li><a href="http://creativecommons.org/licenses/by-nc-sa/4.0/" title="Attribution-NonCommercial-ShareAlike 4.0 International">ç‰ˆæƒ</a></li>


        </ul>
      </nav>
    </header>

    <article class="main">
      <header class="title">
        

<h1>Shellè„šæœ¬ä¹‹å¤„ç†ç”¨æˆ·è¾“å…¥</h1>



<h3>ç‹è¯—ç¿” &middot 
2017-08-19</h3> 


<p style="text-align:right;">
  åˆ†ç±»:
  
    <a href="../../../categories/shell">shell</a> &nbsp
  
  <br>
  æ ‡ç­¾:
  
    <a href="../../../tags/linux">linux</a> &nbsp
  
    <a href="../../../tags/shell">shell</a> &nbsp
  
    <a href="../../../tags/note">note</a> &nbsp
  
</p>



   
  


      </header>


<blockquote>
<p>å†…å®¹ï¼š</p>
<ul>
<li>ä¼ é€’å‚æ•°</li>
<li>è·Ÿè¸ªå‚æ•°</li>
<li>ç§»åŠ¨å˜é‡</li>
<li>å¤„ç†é€‰é¡¹</li>
<li>å°†é€‰é¡¹æ ‡å‡†åŒ–</li>
<li>è·å¾—ç”¨æˆ·è¾“å…¥</li>
</ul>
</blockquote>
<p>ç»è¿‡å‰é¢çš„ä»‹ç»ï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥æŒæ¡ä¸€äº›æµç¨‹åŒ–çš„è„šæœ¬ç¼–ç¨‹äº†ã€‚ä½†æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦ç¼–å†™çš„è„šæœ¬èƒ½å¤Ÿè·Ÿä½¿ç”¨è€…è¿›è¡Œäº¤äº’ã€‚å®ƒå¯ä»¥æ˜¯é™æ€çš„ï¼Œè¾“å…¥ç›¸åº”çš„å‚æ•°è®©å®ƒè¿è¡Œåˆ°åº•ï¼›ä¹Ÿå¯ä»¥æ˜¯åŠ¨æ€çš„ï¼Œè„šæœ¬æ ¹æ®è¾“å…¥å‚æ•°åé¦ˆä¸åŒçš„ä¿¡æ¯ï¼Œä½¿ç”¨è€…åˆèƒ½æ ¹æ®ä¿¡æ¯è°ƒæ•´ä¸‹ä¸€æ­¥çš„å¤„ç†ï¼Œå®æ—¶ä¸ç¨‹åºäº’åŠ¨ã€‚</p>
<p>bash shellæä¾›äº†ä¸€äº›ä¸åŒçš„æ–¹æ³•æ¥ä»<strong>ç”¨æˆ·å¤„è·å¾—æ•°æ®ï¼ŒåŒ…æ‹¬å‘½ä»¤è¡Œå‚æ•°ã€å‘½ä»¤è¡Œé€‰é¡¹ä»¥åŠç›´æ¥ä»é”®ç›˜è¯»å–è¾“å…¥</strong>çš„èƒ½åŠ›ã€‚ä¸‹é¢å°†ä¸€ä¸€ä»‹ç»å®ç°ã€‚</p>
<!-- more -->
<h2 id="å‘½ä»¤è¡Œå‚æ•°">å‘½ä»¤è¡Œå‚æ•°</h2>
<p>ä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°æ˜¯å‘è„šæœ¬ä¼ é€’æ•°æ®çš„æœ€åŸºæœ¬æ–¹æ³•ï¼Œåœ¨è¿è¡Œè„šæœ¬çš„åŒæ—¶å¯ä»¥åœ¨å‘½ä»¤è¡Œæ·»åŠ æ•°æ®ã€‚</p>
<p>æ¯”å¦‚ï¼š</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">./addem <span style="color:#ae81ff">10</span> <span style="color:#ae81ff">30</span>
</code></pre></div><p>è¿è¡Œå½“å‰ç›®å½•ä¸‹åä¸º<code>addem</code>è„šæœ¬çš„åŒæ—¶å‘å†…éƒ¨ä¼ é€’2ä¸ªå‚æ•°ï¼ˆ10å’Œ30ï¼‰ã€‚è€Œè„šæœ¬ä¼šé€šè¿‡ç‰¹æ®Šçš„å˜é‡æ¥å¤„ç†å‘½ä»¤è¡Œå‚æ•°ã€‚</p>
<p>ä¸‹é¢ä»‹ç»å¦‚ä½•ä½¿ç”¨å®ƒä»¬ã€‚</p>
<h3 id="è¯»å…¥å‚æ•°">è¯»å…¥å‚æ•°</h3>
<p>bash shellä¼šå°†ç§°ä¸º<strong>ä½ç½®å‚æ•°</strong>çš„ç‰¹æ®Šå˜é‡åˆ†é…ç»™è¾“å…¥åˆ°å‘½ä»¤è¡Œçš„æ‰€æœ‰å‚æ•°ï¼š<code>$0</code>æ˜¯ç¨‹åºåï¼Œ<code>$1</code>æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œ<code>$2</code>æ˜¯ç¬¬äºŒä¸ªå‚æ•°ï¼Œä»¥æ­¤ç±»æ¨ã€‚ä¹¦ä¸Šä»‹ç»ç›´åˆ°ç¬¬ä¹ä¸ªå‚æ•°<code>$9</code>ï¼Œä½†è¿™ä¸ªåº”è¯¥ä¸æ˜¯å—é™çš„ã€‚<a href="http://www.cnblogs.com/ivictor/p/4022382.html">Shellæœ€å¤šå¯ä»¥è¾“å…¥å¤šå°‘ä¸ªå‚æ•°ï¼Ÿ</a>ä¸€æ–‡æ¢ç´¢äº†å‚æ•°çš„ä¸ªæ•°é™åˆ¶ï¼Œæœ‰å…´è¶£çš„æœ‹å‹ä¸å¦¨çœ‹çœ‹å’Œè¯•è¯•ã€‚</p>
<p>ä¸‹é¢æ˜¯å•ä¸ªå‚æ•°çš„ä¾‹å­ï¼š</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">wsx@wsx-ubuntu:~/script_learn$ cat test1.sh
<span style="color:#75715e">#!/bin/bash</span>

<span style="color:#75715e"># using one command line parameter</span>
#
factorial<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>
<span style="color:#66d9ef">for</span> <span style="color:#f92672">((</span> number <span style="color:#f92672">=</span> 1; number &lt;<span style="color:#f92672">=</span> $1; number++ <span style="color:#f92672">))</span>
<span style="color:#66d9ef">do</span>
	factorial<span style="color:#f92672">=</span>$<span style="color:#f92672">[</span> $factorial * $number <span style="color:#f92672">]</span>
<span style="color:#66d9ef">done</span>
echo The factorial of $1 is $factorial
wsx@wsx-ubuntu:~/script_learn$ ./test1.sh <span style="color:#ae81ff">5</span>
The factorial of <span style="color:#ae81ff">5</span> is <span style="color:#ae81ff">120</span>
</code></pre></div><p>æˆ‘ä»¬å¯ä»¥åƒä½¿ç”¨å…¶ä»–å˜é‡ä¸€æ ·ä½¿ç”¨<code>$1</code>å˜é‡ã€‚shellè„šæœ¬ä¼šè‡ªåŠ¨åˆ†é…ï¼Œä¸éœ€è¦æˆ‘ä»¬åšä»»ä½•å¤„ç†ã€‚å¯ä»¥çœ‹å¾—å‡ºæ¥è¿™æ ·éå¸¸æ–¹ä¾¿ï¼Œä¸è¿‡å¦‚æœè¾“å…¥å‚æ•°è¿‡å¤šï¼Œå¾ˆå®¹æ˜“è®©äººæ··æ·†ã€‚</p>
<p>å¦‚æœéœ€è¦è¾“å…¥æ›´å¤šçš„å‚æ•°ï¼Œåªéœ€è¦ç”¨ç©ºæ ¼åˆ†éš”å³å¯ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">wsx@wsx-ubuntu:~/script_learn$ cat test2.sh
<span style="color:#75715e">#!/bin/bash</span>

<span style="color:#75715e"># using two command line parameters</span>

total<span style="color:#f92672">=</span>$<span style="color:#f92672">[</span> $1 * $2 <span style="color:#f92672">]</span>
echo The first parameter is $1.
echo The second parameter is $2.
echo The total value is $total.

wsx@wsx-ubuntu:~/script_learn$ ./test2.sh <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">5</span>
The first parameter is 2.
The second parameter is 5.
The total value is 10.
</code></pre></div><p>å­—ç¬¦å‚æ•°ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚å¦‚æœæˆ‘æ²¡è®°é”™ï¼Œåœ¨è„šæœ¬ä¸­çš„æ•°å­—é»˜è®¤éƒ½æ˜¯åšå­—ç¬¦å¤„ç†çš„ï¼Œè¿›è¡Œæ•°å­¦è¿ç®—æ—¶ä¼šè‡ªåŠ¨è°ƒæ•´ã€‚ä¸è¿‡å½“æˆ‘ä»¬æƒ³è¦è¾“å…¥çš„ä¸€ä¸ªå‚æ•°æ˜¯å¸¦ç©ºæ ¼çš„å­—ç¬¦ä¸²æ—¶ï¼Œéœ€è¦åœ¨ä¸¤è¾¹åŠ ä¸Šå¼•å·ä»¥ä¿è¯shellèƒ½å¤Ÿæ­£ç¡®è¯†åˆ«ã€‚ä¸ç„¶ä¼šè¢«å½“åšå¤šä¸ªå‚æ•°å¤„ç†çš„ã€‚</p>
<p>ä¸‹é¢å–ä¸ªä¾‹å­ï¼š</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">wsx@wsx-ubuntu:~/script_learn$ cat test3.sh
<span style="color:#75715e">#!/bin/bash</span>

echo Hello $1, glad to meet you.
wsx@wsx-ubuntu:~/script_learn$ ./test3.sh shixiang wang
Hello shixiang, glad to meet you.
wsx@wsx-ubuntu:~/script_learn$ ./test3.sh <span style="color:#e6db74">&#39;shixiang wang&#39;</span>
Hello shixiang wang, glad to meet you.
wsx@wsx-ubuntu:~/script_learn$ ./test3.sh <span style="color:#e6db74">&#34;shixiang wang&#34;</span>
Hello shixiang wang, glad to meet you.
</code></pre></div><p>çœ‹æ¥ä½¿ç”¨æ—¶è¦æ³¨æ„æ­£ç¡®ä½¿ç”¨å¼•å·å–”ã€‚</p>
<blockquote>
<p>è¯´æ˜ï¼šåœ¨æ–‡æœ¬å­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ä¼ é€’æ—¶ï¼Œå¼•å·å¹¶éæ•°æ®çš„ä¸€éƒ¨åˆ†ã€‚å®ƒä»¬åªæ˜¯è¡¨æ˜æ•°æ®çš„èµ·æ­¢ä½ç½®ã€‚</p>
</blockquote>
<p>å¦‚æœéœ€è¦è¾“å…¥çš„å‘½ä»¤è¡Œå‚æ•°ä¸æ­¢9ä¸ªï¼Œå†™è„šæœ¬éœ€è¦ä¿®æ”¹ä¸€ä¸‹å˜é‡åï¼ˆç¬¬9ä¸ªä¹‹åï¼‰ã€‚æ¯”å¦‚<code>${10}</code>è¡¨ç¤ºè¾“å…¥çš„ç¬¬åä¸ªå˜é‡ï¼ˆåŸæ¥å¦‚æ­¤å•Šï¼‰ã€‚</p>
<p>è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å‘è„šæœ¬æ·»åŠ ä»»æ„å¤šçš„å‚æ•°å•¦ï½</p>
<p>å‰é¢ä¹Ÿè¯´äº†ï¼Œ<code>$0</code>å‚æ•°å¯ä»¥è·å–è„šæœ¬åï¼Œè¿™æ ·åœ¨ç¼–ç¨‹çš„æ—¶å€™å¾ˆæ–¹ä¾¿ã€‚ä½†æ˜¯è¿™é‡Œå­˜åœ¨ä¸€ä¸ªæ½œåœ¨çš„é—®é¢˜ï¼šå¦‚æœä½¿ç”¨å¦ä¸€ä¸ªå‘½ä»¤æ¥è¿è¡Œshellè„šæœ¬ï¼Œå‘½ä»¤ä¼šå’Œè„šæœ¬åæ··åœ¨ä¸€èµ·ï¼Œå‡ºç°åœ¨<code>$0</code>ä¸­ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">wsx@wsx-ubuntu:~/script_learn$ cat test4.sh
<span style="color:#75715e">#!/bin/bash</span>
<span style="color:#75715e"># Testing the $0 parameter</span>

echo The zero parameter is set to: $0
wsx@wsx-ubuntu:~/script_learn$ ./test4.sh
The zero parameter is set to: ./test4.sh

wsx@wsx-ubuntu:~/script_learn$ bash test4.sh
The zero parameter is set to: test4.sh

wsx@wsx-ubuntu:~/script_learn$ bash ~/script_learn/test4.sh
The zero parameter is set to: /home/wsx/script_learn/test4.sh
</code></pre></div><p>è€Œä¸”ï¼Œä½ å‘ç°æ²¡æœ‰ï¼Œå½“æŒ‡æ˜è„šæœ¬è·¯å¾„æ—¶ï¼Œè¿™ä¸ªè·¯å¾„ä¹Ÿä¼šå¸¦å…¥å…¶ä¸­ã€‚</p>
<p>å¦‚æœæˆ‘ä»¬è¦ç¼–å†™ä¸€ä¸ªæ ¹æ®è„šæœ¬åæ¥æ‰§è¡Œä¸åŒåŠŸèƒ½çš„è„šæœ¬ï¼Œå°±å¾—æŠŠè„šæœ¬çš„è¿è¡Œè·¯å¾„å‰¥ç¦»æ‰ã€‚è¿˜è¦åˆ é™¤ä¸è„šæœ¬åæ··åœ¨ä¸€èµ·çš„å‘½ä»¤ã€‚å¹¸å¥½æœ‰ä¸€ä¸ªæ–¹ä¾¿çš„å°å‘½ä»¤<code>basename</code>å¯ä»¥å¸®åŠ©æˆ‘ä»¬è¿”å›ä¸åŒ…å«è·¯å¾„çš„è„šæœ¬åã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">wsx@wsx-ubuntu:~/script_learn$ cat test5.sh
<span style="color:#75715e">#!/bin/bash</span>
<span style="color:#75715e"># Using basename with the $0 parameter</span>

name<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>basename $0<span style="color:#66d9ef">)</span>
echo
echo The script name is: $name

wsx@wsx-ubuntu:~/script_learn$ bash ~/script_learn/test5.sh

The script name is: test5.sh
wsx@wsx-ubuntu:~/script_learn$ ./test5.sh

The script name is: test5.sh
</code></pre></div><p>ä¸‹é¢ç¼–å†™åŸºäºè„šæœ¬åæ‰§è¡Œä¸åŒåŠŸèƒ½çš„è„šæœ¬ã€‚æŒºæœ‰æ„æ€çš„ï¼Œæˆ‘ä»¬çœ‹çœ‹å§ï¼š</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">wsx@wsx-ubuntu:~/script_learn$ cat test6.sh
<span style="color:#75715e">#!/bin/bash</span>
<span style="color:#75715e"># Testing a Multi-function script</span>
#
name<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>basename $0<span style="color:#66d9ef">)</span>
#
<span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> $name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;addem&#34;</span> <span style="color:#f92672">]</span>
<span style="color:#66d9ef">then</span>
	total<span style="color:#f92672">=</span>$<span style="color:#f92672">[</span> $1 + $2 <span style="color:#f92672">]</span>
<span style="color:#66d9ef">elif</span> <span style="color:#f92672">[</span> $name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;multem&#34;</span> <span style="color:#f92672">]</span>
<span style="color:#66d9ef">then</span>
	total<span style="color:#f92672">=</span>$<span style="color:#f92672">[</span> $1 * $2 <span style="color:#f92672">]</span>
<span style="color:#66d9ef">fi</span>
#
echo
echo The calculated value is $total.
wsx@wsx-ubuntu:~/script_learn$ cp test6.sh addem
wsx@wsx-ubuntu:~/script_learn$ chmod u+x addem
wsx@wsx-ubuntu:~/script_learn$ ln -s test6.sh multem
wsx@wsx-ubuntu:~/script_learn$ ll *em
-rwxrw-r-- <span style="color:#ae81ff">1</span> wsx wsx <span style="color:#ae81ff">216</span> 8æœˆ  <span style="color:#ae81ff">18</span> 16:47 addem*
lrwxrwxrwx <span style="color:#ae81ff">1</span> wsx wsx   <span style="color:#ae81ff">8</span> 8æœˆ  <span style="color:#ae81ff">18</span> 16:47 multem -&gt; test6.sh*
wsx@wsx-ubuntu:~/script_learn$ ./addem <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">5</span>

The calculated value is 7.
wsx@wsx-ubuntu:~/script_learn$ ./multem <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">5</span>

The calculated value is 10.

</code></pre></div><p>è¿™ä¸ªè„šæœ¬ä¸­åˆ›å»ºäº†ä¸¤ä¸ªä¸åŒçš„æ–‡ä»¶åï¼šä¸€ä¸ªé€šè¿‡å¤åˆ¶åˆ›å»ºï¼›å¦ä¸€ä¸ªé€šè¿‡é“¾æ¥ã€‚åœ¨ä¸¤ç§æƒ…å†µä¸‹éƒ½ä¼šå…ˆè·å¾—è„šæœ¬çš„åŸºæœ¬åç§°ï¼Œç„¶åæ ¹æ®è¯¥å€¼æ‰§è¡Œç›¸åº”çš„åŠŸèƒ½ã€‚</p>
<h3 id="æµ‹è¯•å‚æ•°">æµ‹è¯•å‚æ•°</h3>
<p>å¦‚æœåœ¨è„šæœ¬ä¸­ä½¿ç”¨äº†å‚æ•°ï¼Œä½†æ˜¯è¿è¡Œè„šæœ¬æ—¶æ²¡ç”¨å‚æ•°ï¼Œè¿™ä¼šå¯¼è‡´é”™è¯¯å‘ç”Ÿï¼Œéœ€è¦å°å¿ƒã€‚å› æ­¤æˆ‘ä»¬åœ¨ä½¿ç”¨å‚æ•°å‰åº”è¯¥æµ‹è¯•ã€‚</p>
<p>å¥½æ¯”ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼š</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">wsx@wsx-ubuntu:~/script_learn$ cat test7.sh
<span style="color:#75715e">#!/bin/bash</span>
<span style="color:#75715e"># testing parameters before use</span>
#
<span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> -n <span style="color:#e6db74">&#34;</span>$1<span style="color:#e6db74">&#34;</span> <span style="color:#f92672">]</span> <span style="color:#75715e"># -n é€‰é¡¹æ£€æŸ¥å­—ç¬¦æ˜¯å¦éç©º</span>
<span style="color:#66d9ef">then</span>
	echo Hello $1, glad to meet you.
<span style="color:#66d9ef">else</span>
	echo <span style="color:#e6db74">&#34;Sorry, you did not identify yourself.&#34;</span>
<span style="color:#66d9ef">fi</span>

wsx@wsx-ubuntu:~/script_learn$ ./test7.sh shixiang
Hello shixiang, glad to meet you.
wsx@wsx-ubuntu:~/script_learn$ ./test7.sh
Sorry, you did not identify yourself.
</code></pre></div><h2 id="ç‰¹æ®Šå‚æ•°å˜é‡">ç‰¹æ®Šå‚æ•°å˜é‡</h2>
<p>bash shellä¸­æœ‰äº›ç‰¹æ®Šå˜é‡ï¼Œå®ƒä»¬ä¼šè®°å½•å‘½ä»¤è¡Œå‚æ•°ã€‚</p>
<h3 id="å‚æ•°ç»Ÿè®¡">å‚æ•°ç»Ÿè®¡</h3>
<p>bash shellæä¾›äº†ä¸€ä¸ªç‰¹æ®Šçš„å˜é‡<code>$#</code>æ¥ç»Ÿè®¡å‘½ä»¤è¡Œä¸­è¾“å…¥äº†å¤šå°‘ä¸ªå‚æ•°ã€‚æˆ‘ä»¬å¯ä»¥åƒä½¿ç”¨æ™®é€šå˜é‡ä¸€æ ·ä½¿ç”¨å®ƒã€‚</p>
<p>ç°åœ¨èƒ½åœ¨ä½¿ç”¨å‚æ•°å‰æµ‹è¯•å‚æ•°çš„æ€»æ•°äº†ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">wangsx@SC-201708020022:~/tmp$ cat test9.sh
<span style="color:#75715e">#!/bin/bash</span>
<span style="color:#75715e"># Testing parameters</span>
#
<span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> $# -ne <span style="color:#ae81ff">2</span> <span style="color:#f92672">]</span>
<span style="color:#66d9ef">then</span>
    echo
    echo Usage: test9.sh a b
    echo
<span style="color:#66d9ef">else</span>
    total<span style="color:#f92672">=</span>$<span style="color:#f92672">[</span> $1 + $2 <span style="color:#f92672">]</span>
    echo
    echo The total is $total
    echo
<span style="color:#66d9ef">fi</span>

wangsx@SC-201708020022:~/tmp$ bash test9.sh

Usage: test9.sh a b

wangsx@SC-201708020022:~/tmp$ bash test9.sh <span style="color:#ae81ff">10</span>

Usage: test9.sh a b

wangsx@SC-201708020022:~/tmp$ bash test9.sh <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">5</span>

The total is <span style="color:#ae81ff">7</span>
</code></pre></div><p>ä¾‹å­ä¸­ï¼Œ<code>if-then</code>è¯­å¥ç”¨<code>-ne</code>æµ‹è¯•å‘½ä»¤è¡Œå‚æ•°æ•°é‡ã€‚å¦‚æœå‚æ•°æ•°é‡ä¸å¯¹ï¼Œä¼šæ˜¾ç¤ºä¸€æ¡é”™è¯¯ä¿¡æ¯å‘Šè¯‰è„šæœ¬çš„æ­£ç¡®ç”¨æ³•ã€‚</p>
<p>è¿™ä¸ªå˜é‡è¿˜æä¾›äº†ä¸€ä¸ªç®€ä¾¿æ–¹æ³•æ¥è·å–å‘½ä»¤è¡Œæœ€åä¸€ä¸ªå‚æ•°ï¼Œå®Œå…¨ä¸éœ€è¦çŸ¥é“å®é™…ä¸Šæœ‰å¤šå°‘ä¸ªå‚æ•°ã€‚ä¸è¿‡è¦å®ç°å®ƒéœ€è¦èŠ±äº›åŠŸå¤«ã€‚</p>
<p>ä¹Ÿè®¸ï¼Œæˆ‘ä»¬ä¼šæœ‰è¿™æ ·çš„æƒ³æ³•ï¼Œæ—¢ç„¶<code>$#</code>å˜é‡å«æœ‰å‚æ•°çš„æ€»æ•°ï¼Œé‚£ä¹ˆå˜é‡<code>{% raw %}${$#}{% endraw %}</code>å°±ä»£è¡¨äº†æœ€åä¸€ä¸ªå‘½ä»¤è¡Œå‚æ•°å˜é‡ã€‚è¯•è¯•çœ‹å‘—ï¼š</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">wangsx@SC-201708020022:~/tmp$ cat test10.sh
<span style="color:#75715e">#!/bin/bash</span>

<span style="color:#75715e"># testing grabbing last parameter</span>
#
echo The last parameter was <span style="color:#e6db74">${</span>$#<span style="color:#e6db74">}</span>

wangsx@SC-201708020022:~/tmp$ ./test10.sh <span style="color:#ae81ff">10</span>
The last parameter was <span style="color:#ae81ff">65</span>

</code></pre></div><p>æˆ‘æ“¦ï¼Œæ˜æ˜¾ä¸å¯¹ã€‚è¿™è¯´æ˜<code>{% raw %}${$#}{% endraw %}</code>çš„ç”¨æ³•é”™è¯¯ã€‚å®é™…ä¸Šï¼ŒèŠ±æ‹¬å·èƒ½ä¸èƒ½ä½¿ç”¨ç¾å…ƒç¬¦ï¼Œå¿…é¡»æŠŠå®ƒæ¢æˆæ„Ÿå¹å·ã€‚è™½ç„¶æœ‰ç‚¹å¥‡æ€ªï¼Œä½†çš„ç¡®æœ‰ç”¨ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">wangsx@SC-201708020022:~/tmp$ cat test10.sh
<span style="color:#75715e">#!/bin/bash</span>

<span style="color:#75715e"># testing grabbing last parameter</span>
#
echo The last parameter was <span style="color:#e6db74">${</span>!#<span style="color:#e6db74">}</span>

wangsx@SC-201708020022:~/tmp$ ./test10.sh <span style="color:#ae81ff">10</span>
The last parameter was <span style="color:#ae81ff">10</span>
wangsx@SC-201708020022:~/tmp$ ./test10.sh <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">3</span> <span style="color:#ae81ff">4</span> <span style="color:#ae81ff">5</span>
The last parameter was <span style="color:#ae81ff">5</span>
</code></pre></div><h3 id="æŠ“å–æ‰€æœ‰çš„æ•°æ®">æŠ“å–æ‰€æœ‰çš„æ•°æ®</h3>
<p><code>$*</code>ä¸<code>$@</code>å˜é‡å¯ä»¥ç”¨æ¥è½»æ¾è®¿é—®æ‰€æœ‰çš„å‚æ•°ã€‚å®ƒä»¬éƒ½èƒ½å¤Ÿåœ¨å•ä¸ªå˜é‡ä¸­å­˜å‚¨æ‰€æœ‰çš„å‘½ä»¤è¡Œå‚æ•°ã€‚</p>
<p><code>$*</code>å˜é‡ä¼šå°†å‘½ä»¤è¡Œæä¾›çš„æ‰€æœ‰å‚æ•°å½“ä½œä¸€ä¸ªå•è¯ä¿å­˜ã€‚è¿™ä¸ªå•è¯åŒ…å«äº†å‘½ä»¤è¡Œä¸­å‡ºç°çš„æ¯ä¸€ä¸ªå‚æ•°å€¼ã€‚åŸºæœ¬ä¸Š<code>$*</code>å˜é‡ä¼šå°†è¿™äº›å‚æ•°è§†ä¸ºä¸€ä¸ªæ•´ä½“ï¼Œè€Œä¸æ˜¯å¤šä¸ªä¸ªä½“ã€‚</p>
<p><code>$@</code>åˆ™å°†æ‰€æœ‰å‚æ•°å½“ä½œåŒä¸€å­—ç¬¦ä¸²ä¸­çš„å¤šä¸ªç‹¬ç«‹çš„å•è¯ã€‚è¿™æ ·èƒ½å¤Ÿéå†æ‰€æœ‰çš„å‚æ•°å€¼ï¼Œå¾—åˆ°æ¯ä¸ªå‚æ•°ã€‚è¿™é€šå¸¸äº¤ç»™<code>for</code>å‘½ä»¤å®Œæˆã€‚</p>
<p>å¼„ä¸ªä¾‹å­å§ï¼Œç†è§£ä¸¤è€…çš„åŒºåˆ«ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">wangsx@SC-201708020022:~/tmp$ cat test11.sh
<span style="color:#75715e">#!/bin/bash</span>
<span style="color:#75715e"># testing $* and $@</span>
#
echo
echo <span style="color:#e6db74">&#34;Using then \$* method: </span>$*<span style="color:#e6db74">&#34;</span>
echo
echo <span style="color:#e6db74">&#34;Using the \$@ method: </span>$@<span style="color:#e6db74">&#34;</span>
wangsx@SC-201708020022:~/tmp$ ./test11.sh rich barbara katie jessica

Using <span style="color:#66d9ef">then</span> $* method: rich barbara katie jessica

Using the $@ method: rich barbara katie jessica

<span style="color:#75715e"># ä¸‹é¢ç»™å‡ºä¸¤è€…å·®å¼‚</span>
wangsx@SC-201708020022:~/tmp$ cat test12.sh
<span style="color:#75715e">#!/bin/bash</span>
echo
count<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>
#
<span style="color:#66d9ef">for</span> param in <span style="color:#e6db74">&#34;</span>$*<span style="color:#e6db74">&#34;</span>
<span style="color:#66d9ef">do</span>
    echo <span style="color:#e6db74">&#34;\$* Parameter #</span>$count<span style="color:#e6db74"> = </span>$param<span style="color:#e6db74">&#34;</span>
    count<span style="color:#f92672">=</span>$<span style="color:#f92672">[</span> $count + <span style="color:#ae81ff">1</span> <span style="color:#f92672">]</span>
<span style="color:#66d9ef">done</span>
#
echo
count<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>
#

<span style="color:#66d9ef">for</span> param in <span style="color:#e6db74">&#34;</span>$@<span style="color:#e6db74">&#34;</span>
<span style="color:#66d9ef">do</span>
    echo <span style="color:#e6db74">&#34;\$@ Parameter #</span>$count<span style="color:#e6db74"> = </span>$param<span style="color:#e6db74">&#34;</span>
    count<span style="color:#f92672">=</span>$<span style="color:#f92672">[</span> $count + <span style="color:#ae81ff">1</span> <span style="color:#f92672">]</span>
<span style="color:#66d9ef">done</span>
wangsx@SC-201708020022:~/tmp$ ./test12.sh rich barbara katie jessica

$* Parameter <span style="color:#75715e">#1 = rich barbara katie jessica</span>

$@ Parameter <span style="color:#75715e">#1 = rich</span>
$@ Parameter <span style="color:#75715e">#2 = barbara</span>
$@ Parameter <span style="color:#75715e">#3 = katie</span>
$@ Parameter <span style="color:#75715e">#4 = jessica</span>
</code></pre></div><h2 id="ç§»åŠ¨å˜é‡">ç§»åŠ¨å˜é‡</h2>
<p>bash shellçš„<code>shift</code>å‘½ä»¤èƒ½å¤Ÿç”¨æ¥æ“ä½œå‘½ä»¤è¡Œå‚æ•°ã€‚é»˜è®¤æƒ…å†µä¸‹å®ƒä¼šå°†æ¯ä¸ªå‚æ•°å˜é‡å‘å·¦ç§»åŠ¨ä¸€ä¸ªä½ç½®ã€‚So, å˜é‡<code>$3</code>çš„å€¼ä¼šç§»åˆ°<code>$2</code>ï¼Œ<code>$2</code>ç§»åˆ°<code>$1</code>ï¼Œè€Œ<code>$1</code>çš„å€¼ä¼šè¢«åˆ é™¤ï¼ˆ<code>$0</code>çš„å€¼ï¼Œä¹Ÿå°±æ˜¯è„šæœ¬åï¼Œæ˜¯ä¸ä¼šå˜çš„ï¼‰ã€‚</p>
<p>è¿™æ˜¯éå†å‘½ä»¤è¡Œå‚æ•°çš„å¦ä¸€ä¸ªå¥½æ–¹æ³•ï¼Œä¸éœ€è¦çŸ¥é“å‚æ•°çš„ä¸ªæ•°ï¼Œæˆ‘ä»¬åªéœ€è¦æ“ä½œç¬¬ä¸€ä¸ªå‚æ•°ï¼Œç„¶åç§»åŠ¨å‚æ•°ï¼Œç»§ç»­æ“ä½œç¬¬ä¸€ä¸ªå‚æ•°ã€‚</p>
<p>ä¸‹é¢è§£é‡Šå®ƒæ€ä¹ˆå·¥ä½œçš„ï¼š</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">wangsx@SC-201708020022:~/tmp$ cat test13.sh
<span style="color:#75715e">#!/bin/bash</span>
<span style="color:#75715e"># demonstrating the shift command</span>
#
echo
count<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>
<span style="color:#66d9ef">while</span> <span style="color:#f92672">[</span> -n <span style="color:#e6db74">&#34;</span>$1<span style="color:#e6db74">&#34;</span> <span style="color:#f92672">]</span>
<span style="color:#66d9ef">do</span>
    echo <span style="color:#e6db74">&#34;Parameter #</span>$count<span style="color:#e6db74"> = </span>$1<span style="color:#e6db74">&#34;</span>
    count<span style="color:#f92672">=</span>$<span style="color:#f92672">[</span> $count + <span style="color:#ae81ff">1</span> <span style="color:#f92672">]</span>
    shift
<span style="color:#66d9ef">done</span>

wangsx@SC-201708020022:~/tmp$ ./test13.sh rich barbara katie jessica

Parameter <span style="color:#75715e">#1 = rich</span>
Parameter <span style="color:#75715e">#2 = barbara</span>
Parameter <span style="color:#75715e">#3 = katie</span>
Parameter <span style="color:#75715e">#4 = jessica</span>
</code></pre></div><blockquote>
<p>ä½¿ç”¨shiftå‘½ä»¤æ—¶éœ€è¦æ³¨æ„ï¼Œä¸€æ—¦å‚æ•°è¢«ç§»é™¤ï¼Œå®ƒçš„å€¼å°±è¢«ä¸¢å¼ƒäº† ï¼Œæ— æ³•å†æ¢å¤ã€‚</p>
</blockquote>
<p><code>shift n</code>ä¸­<code>n</code>å¯ä»¥æŒ‡å®šç§»åŠ¨å¤šä¸ªä½ç½®ã€‚</p>
<h2 id="å¤„ç†é€‰é¡¹">å¤„ç†é€‰é¡¹</h2>
<p>ç†Ÿæ‚‰Linuxçš„æœ‹å‹å¿…ç„¶è§è¿‡ä¸å°‘åŒæ—¶æä¾›å‚æ•°å’Œé€‰é¡¹çš„bashå‘½ä»¤ã€‚é€‰é¡¹æ˜¯è·Ÿåœ¨ä½†ç ´æŠ˜çº¿åé¢çš„å•ä¸ªå­—æ¯ï¼Œå®ƒèƒ½æ”¹å˜å‘½ä»¤çš„è¡Œä¸ºã€‚ä¸‹é¢ä»‹ç»3ä¸­å†è„šæœ¬ä¸­å¤„ç†é€‰é¡¹çš„æ–¹æ³•ã€‚</p>
<h3 id="æŸ¥æ‰¾é€‰é¡¹">æŸ¥æ‰¾é€‰é¡¹</h3>
<p>åªè¦æˆ‘ä»¬æ„¿æ„ï¼Œæˆ‘ä»¬å¯ä»¥åƒå¤„ç†å‘½ä»¤è¡Œå‚æ•°ä¸€æ ·å¤„ç†å‘½ä»¤è¡Œé€‰é¡¹ã€‚</p>
<h4 id="å¤„ç†ç®€å•é€‰é¡¹">å¤„ç†ç®€å•é€‰é¡¹</h4>
<p>å‰é¢ä¸€èŠ‚æœ€åæˆ‘ä»¬ç”¨<code>shift</code>å‘½ä»¤æ¥ä¾æ¬¡å¤„ç†è„šæœ¬æºå¸¦çš„å‘½ä»¤è¡Œå‚æ•°ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨åŒæ ·çš„æ–¹æ³•æ¥å¤„ç†å‘½ä»¤è¡Œé€‰é¡¹ã€‚</p>
<p>åœ¨æå–æ¯ä¸ªå•ç‹¬å‚æ•°æ—¶ï¼Œç”¨<code>case</code>è¯­å¥æ¥åˆ¤æ–­æŸä¸ªå‚æ•°æ˜¯å¦ä¸ºé€‰é¡¹ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">wangsx@SC-201708020022:~/tmp$ cat test15.sh
<span style="color:#75715e">#!/bin/bash</span>
<span style="color:#75715e"># extracting command line option as parameter</span>
#
echo
<span style="color:#66d9ef">while</span> <span style="color:#f92672">[</span> -n <span style="color:#e6db74">&#34;</span>$1<span style="color:#e6db74">&#34;</span> <span style="color:#f92672">]</span>
<span style="color:#66d9ef">do</span>
    <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#34;</span>$1<span style="color:#e6db74">&#34;</span> in
        -a<span style="color:#f92672">)</span> echo <span style="color:#e6db74">&#34;Found the -a option&#34;</span>;;
        -b<span style="color:#f92672">)</span> echo <span style="color:#e6db74">&#34;Found the -b option&#34;</span>;;
        -c<span style="color:#f92672">)</span> echo <span style="color:#e6db74">&#34;Found the -c option&#34;</span>;;
        *<span style="color:#f92672">)</span>  echo <span style="color:#e6db74">&#34;</span>$1<span style="color:#e6db74"> is not an option&#34;</span>;;
    <span style="color:#66d9ef">esac</span>
    shift
<span style="color:#66d9ef">done</span>

wangsx@SC-201708020022:~/tmp$ ./test15.sh -a -b -c -d

Found the -a option
Found the -b option
Found the -c option
-d is not an option
</code></pre></div><p><code>case</code>è¯­å¥åœ¨å‘½ä»¤è¡Œå‚æ•°ä¸­æ‰¾åˆ°ä¸€ä¸ªé€‰é¡¹ï¼Œå°±å¤„ç†ä¸€ä¸ªé€‰é¡¹ã€‚å¦‚æœå‘½ä»¤è¡Œä¸Šè¿˜æä¾›äº†å…¶ä»–å‚æ•°ï¼Œä½ å¯ä»¥åœ¨<code>case</code>è¯­å¥çš„é€šç”¨æƒ…å†µå¤„ç†éƒ¨åˆ†ä¸­å¤„ç†ã€‚</p>
<h4 id="åˆ†ç¦»å‚æ•°ä¸é€‰é¡¹">åˆ†ç¦»å‚æ•°ä¸é€‰é¡¹</h4>
<p>shellè„šæœ¬é€šå¸¸ä½¿ç”¨é€‰é¡¹å’Œå‚æ•°ï¼ŒLinuxä¸­å¤„ç†è¿™ä¸ªé—®é¢˜çš„æ ‡å‡†æ–¹æ³•æ˜¯ç”¨<strong>ç‰¹æ®Šå­—ç¬¦</strong>æ¥å°†äºŒè€…åˆ†å¼€ï¼Œè¯¥å­—ç¬¦ä¼šå‘Šè¯‰è„šæœ¬ä½•æ—¶é€‰é¡¹ç»“æŸä»¥åŠæ™®é€šå‚æ•°ä½•æ—¶å¼€å§‹ã€‚</p>
<p>è¿™ä¸ªæ‰€è°“çš„ç‰¹æ®Šå­—ç¬¦å°±æ˜¯<code>--</code>åŒç ´æŠ˜å·ã€‚</p>
<p>è¦æ£€æŸ¥åŒç ´æŠ˜å·ï¼Œåœ¨<code>case</code>è¯­å¥ä¸­åŠ ä¸€é¡¹å°±è¡Œäº†ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">wangsx@SC-201708020022:~/tmp$ cat test16.sh
<span style="color:#75715e">#!/bin/bash</span>
<span style="color:#75715e"># extracting options and paramters</span>
echo
<span style="color:#66d9ef">while</span> <span style="color:#f92672">[</span> -n <span style="color:#e6db74">&#34;</span>$1<span style="color:#e6db74">&#34;</span> <span style="color:#f92672">]</span>
<span style="color:#66d9ef">do</span>
    <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#34;</span>$1<span style="color:#e6db74">&#34;</span> in
        -a<span style="color:#f92672">)</span> echo <span style="color:#e6db74">&#34;Found the -a option&#34;</span>;;
        -b<span style="color:#f92672">)</span> echo <span style="color:#e6db74">&#34;Found the -b option&#34;</span>;;
        -c<span style="color:#f92672">)</span> echo <span style="color:#e6db74">&#34;Found the -c option&#34;</span>;;
        --<span style="color:#f92672">)</span> shift
            break ;;
        *<span style="color:#f92672">)</span> echo <span style="color:#e6db74">&#34;</span>$1<span style="color:#e6db74"> is not an option&#34;</span>;;
    <span style="color:#66d9ef">esac</span>
    shift
<span style="color:#66d9ef">done</span>
#
count<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>
<span style="color:#66d9ef">for</span> param in $@
<span style="color:#66d9ef">do</span>
    echo <span style="color:#e6db74">&#34;Parameter #</span>$count<span style="color:#e6db74">: </span>$param<span style="color:#e6db74">&#34;</span>
    count<span style="color:#f92672">=</span>$<span style="color:#f92672">[</span> $count + <span style="color:#ae81ff">1</span> <span style="color:#f92672">]</span>
<span style="color:#66d9ef">done</span>
</code></pre></div><p>å½“é‡åˆ°åŒç ´æŠ˜å·æ—¶ï¼Œå…ˆæŠŠå®ƒç§»é™¤æ‰ï¼Œç„¶åè·³å‡ºå¾ªç¯ï¼Œè¿™æ ·shellå°±ä¼šæŠŠåé¢çš„å‚æ•°å½“å‚æ•°è€Œä¸æ˜¯é€‰é¡¹å¤„ç†äº†ã€‚</p>
<p>å…ˆç”¨ä¸€ç»„æ™®é€šçš„é€‰é¡¹å’Œå‚æ•°æ¥è¿è¡Œæµ‹è¯•è„šæœ¬ï¼š</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">wangsx@SC-201708020022:~/tmp$ ./test16.sh -c -a -b test1 test2 test3

Found the -c option
Found the -a option
Found the -b option
test1 is not an option
test2 is not an option
test3 is not an option
</code></pre></div><p>ç°åœ¨åŠ ä¸ŠåŒç ´æŠ˜å·ï¼Œè¿›è¡Œæµ‹è¯•ï¼š</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">wangsx@SC-201708020022:~/tmp$ ./test16.sh -c -a -b -- test1 test2 test3

Found the -c option
Found the -a option
Found the -b option
Parameter <span style="color:#75715e">#1: test1</span>
Parameter <span style="color:#75715e">#2: test2</span>
Parameter <span style="color:#75715e">#3: test3</span>
</code></pre></div><p>å¯ä»¥çœ‹åˆ°ï¼Œå½“è„šæœ¬é‡åˆ°åŒç ´æŠ˜å·æ—¶ï¼Œå®ƒä¼šåœæ­¢å¤„ç†é€‰é¡¹ï¼Œå¹¶å°†å‰©ä¸‹çš„å‚æ•°éƒ½å½“åšå‘½ä»¤å¤„ç†ã€‚</p>
<p>è¿™æ ·å¦‚æœé¡ºåºå¡«å†™é€‰é¡¹å’Œå‚æ•°çš„è¯ï¼Œæ˜¾ç„¶æ²¡ä»€ä¹ˆé—®é¢˜ã€‚ä½†æ˜¯å¦‚æœä¹±åºå†™å‘¢ï¼Ÿå¾ˆæ˜¾ç„¶é€‰é¡¹å’Œå‚æ•°å¯¹åº”ä¸èµ·æ¥ã€‚å¦‚ä½•è§£å†³ï¼Ÿ</p>
<h4 id="å¤„ç†å¸¦å€¼çš„é€‰é¡¹">å¤„ç†å¸¦å€¼çš„é€‰é¡¹</h4>
<p>æœ‰äº›é€‰é¡¹ä¼šå¸¦ä¸Šä¸€ä¸ªé¢å¤–çš„å‚æ•°å€¼ï¼Œç±»ä¼¼ä¸‹é¢ï¼š</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">./testing.sh -a test1 -b -c -d test2
</code></pre></div><p>ä¸‹é¢çœ‹çœ‹æ€ä¹ˆæ­£ç¡®å¤„ç†ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">wangsx@SC-201708020022:~/tmp$ cat test17.sh
<span style="color:#75715e">#!/bin/bash</span>
<span style="color:#75715e"># extracting command line options and values</span>
echo
<span style="color:#66d9ef">while</span> <span style="color:#f92672">[</span> -n <span style="color:#e6db74">&#34;</span>$1<span style="color:#e6db74">&#34;</span> <span style="color:#f92672">]</span>
<span style="color:#66d9ef">do</span>
    <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#34;</span>$1<span style="color:#e6db74">&#34;</span> in
        -a<span style="color:#f92672">)</span> echo <span style="color:#e6db74">&#34;Found the -a option&#34;</span>;;
        -b<span style="color:#f92672">)</span> param<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span>$2<span style="color:#e6db74">&#34;</span>
            echo <span style="color:#e6db74">&#34;Found the -b option, with parameter value </span>$param<span style="color:#e6db74">&#34;</span>
            shift;;
        -c<span style="color:#f92672">)</span> echo <span style="color:#e6db74">&#34;Found the -c option&#34;</span>;;
        --<span style="color:#f92672">)</span> shift
            break;;
        *<span style="color:#f92672">)</span> echo <span style="color:#e6db74">&#34;</span>$1<span style="color:#e6db74"> is not an option&#34;</span>;;
    <span style="color:#66d9ef">esac</span>
    shift
<span style="color:#66d9ef">done</span>
#
count<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>
<span style="color:#66d9ef">for</span> param in <span style="color:#e6db74">&#34;</span>$@<span style="color:#e6db74">&#34;</span>
<span style="color:#66d9ef">do</span>
    echo <span style="color:#e6db74">&#34;Paramter #</span>$count<span style="color:#e6db74">: </span>$param<span style="color:#e6db74">&#34;</span>
    count<span style="color:#f92672">=</span>$<span style="color:#f92672">[</span> $count + <span style="color:#ae81ff">1</span> <span style="color:#f92672">]</span>
<span style="color:#66d9ef">done</span>
wangsx@SC-201708020022:~/tmp$ ./test17.sh -a -b test1 -d

Found the -a option
Found the -b option, with parameter value test1
-d is not an option
</code></pre></div><p>æœ¬ä¾‹ä¸­ï¼Œå®šä¹‰äº†3ä¸ªè¦å¤„ç†çš„é€‰é¡¹ï¼Œ<code>-b</code>è¿˜å¸¦ä¸€ä¸ªé¢å¤–å‚æ•°ã€‚å› ä¸ºå¤„ç†çš„é€‰é¡¹æ˜¯<code>$1</code>ï¼Œæ‰€ä»¥é¢å¤–å‚æ•°ä½äº<code>$2</code>ï¼Œå¦å¤–å› ä¸ºåŠ äº†é¢å¤–å‚æ•°ï¼Œæ‰€ä»¥æ‰¾åˆ°ååº”è¯¥ç”¨<code>shift</code>æŠŠå®ƒç§»é™¤ï¼ˆè¿™ä¸ªé€‰é¡¹å äº†ä¸¤ä¸ªä½ç½®ï¼Œéœ€è¦å¤šç§»åŠ¨ä¸€ä¸ªï¼‰ã€‚</p>
<p>è¿™æ ·ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®éœ€æ±‚è¿›è¡Œç±»ä¼¼çš„è®¾å®šäº†ã€‚ä¸ç®¡ä»€ä¹ˆé¡ºåºæ”¾ç½®é€‰é¡¹éƒ½å¯ä»¥æ­£å¸¸å·¥ä½œã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">wangsx@SC-201708020022:~/tmp$ ./test17.sh  -b test1 -a -d

Found the -b option, with parameter value test1
Found the -a option
-d is not an option
</code></pre></div><p>ä¸è¿‡ï¼Œè¿™é‡Œè¿˜æœ‰ä¸€äº›é™åˆ¶ã€‚å¦‚æœæˆ‘ä»¬æƒ³æŠŠå¤šä¸ªé€‰é¡¹æ”¾åœ¨ä¸€èµ·ï¼Œè¿™æ ·å°±è¡Œä¸é€šå•¦~</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">wangsx@SC-201708020022:~/tmp$ ./test17.sh  -ac

-ac is not an option
</code></pre></div><p>è€Œè¿™ç§åŠŸèƒ½æ˜¯Linuxå¸¸è§çš„å–”ã€‚é‚£ç©¶ç«Ÿæ€ä¹ˆåˆå¹¶é€‰é¡¹å‘¢ï¼Ÿå¹¸å¥½è¿˜æœ‰ä¸€ç§å¤„ç†æ–¹æ³•å¯ä»¥å¸®å¿™ã€‚</p>
<h3 id="ä½¿ç”¨getoptå‘½ä»¤">ä½¿ç”¨getoptå‘½ä»¤</h3>
<p><code>getopt</code>å‘½ä»¤æ˜¯ä¸€ä¸ªå¤„ç†å‘½ä»¤è¡Œé€‰é¡¹å’Œå‚æ•°æ—¶éå¸¸æ–¹ä¾¿çš„å·¥å…·ã€‚å®ƒèƒ½å¤Ÿè¯†åˆ«å‘½ä»¤è¡Œå‚æ•°ï¼Œä»è€Œæ›´æ–¹ä¾¿åœ°è¿›è¡Œè§£æã€‚</p>
<p><strong>å‘½ä»¤çš„æ ¼å¼</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">getopt optstring parameters
</code></pre></div><p><code>optstring</code>æ˜¯è¿™ä¸ªè¿‡ç¨‹çš„å…³é”®æ‰€åœ¨ã€‚å®ƒå®šä¹‰äº†å‘½ä»¤è¡Œæœ‰æ•ˆçš„é€‰é¡¹å­—æ¯ï¼Œè¿˜å®šä¹‰äº†å“ªäº›å­—æ¯éœ€è¦å¸¦å‚æ•°ã€‚</p>
<p><strong>é¦–å…ˆï¼Œåœ¨<code>optstring</code>ä¸­åˆ—å‡ºä½ è¦åœ¨è„šæœ¬ä¸­ç”¨åˆ°çš„æ¯ä¸ªå‘½ä»¤è¡Œé€‰é¡¹å­—æ¯ã€‚ç„¶åï¼Œåœ¨æ¯ä¸ªéœ€è¦å‚æ•°å€¼çš„é€‰é¡¹å­—æ¯ååŠ ä¸€ä¸ªå†’å·ã€‚</strong></p>
<blockquote>
<p><code>getopt</code>çš„é«˜çº§ç‰ˆæœ¬å«<code>getoptions</code>ã€‚éœ€è¦æ³¨æ„åŒºåˆ†</p>
</blockquote>
<p>ä¸‹é¢çœ‹çœ‹<code>getopt</code>å¦‚ä½•å·¥ä½œçš„ï¼š</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">wangsx@SC-201708020022:~/tmp$ getopt ab:cd -a -b test1 -cd test2 test3
 -a -b test1 -c -d -- test2 test3
</code></pre></div><p>è¿è¡Œå®Œåçœ‹åˆ°ç»“æœæ„Ÿè§‰è‡ªå·±æ™•ä¹ä¹çš„ï¼Œè®©æˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹è§£é‡Šï¼š</p>
<p><code>optstring</code>å®šä¹‰äº†å››ä¸ªæœ‰æ•ˆé€‰é¡¹å­—æ¯ï¼ša,b,c,dã€‚ï¼ˆå—¯ï¼Œå¯¹çš„ï¼Œè¿™ä¸ªæ²¡é—®é¢˜ï¼‰ã€‚å†’å·è¢«æ”¾åœ¨å­—æ¯båé¢ï¼Œè¯´æ˜bé€‰é¡¹éœ€è¦ä¸€ä¸ªå‚æ•°ã€‚ï¼ˆè¿™æ ·å•Šï¼‰ã€‚å½“<code>getopt</code>å‘½ä»¤è¿è¡Œæ—¶ï¼Œå®ƒä¼šæ£€æŸ¥å‚æ•°åˆ—è¡¨ï¼ˆå°±æ—¶getoptå‘½ä»¤åé¢è·Ÿçš„ï¼‰ï¼Œå¹¶åŸºäºæä¾›çš„<code>optstring</code>è¿›è¡Œè§£æã€‚å€¼å¾—æ³¨æ„ï¼Œå®ƒä¼šè‡ªåŠ¨æŠŠ<code>-cd</code>é€‰é¡¹åˆ†æˆä¸¤ä¸ªç‹¬ç«‹çš„é€‰é¡¹ï¼Œå¹¶æ’å…¥åŒç ´æŠ˜å·æ¥åˆ†éš”è¡Œä¸­çš„é¢å¤–å‚æ•°ã€‚</p>
<p>å¦‚æœæŒ‡å®šçš„é€‰é¡¹ä¸åœ¨<code>optstring</code>ä¸­ï¼Œä¼šæŠ¥é”™ã€‚<code>-q</code>é€‰é¡¹å¯ä»¥å¿½ç•¥æ‰å®ƒï¼ˆæ³¨æ„æ”¾åœ¨<code>optstring</code>ä¹‹å‰ï¼Œå› ä¸ºæ˜¯å‘½ä»¤æœ¬èº«çš„é€‰é¡¹å˜›ï¼‰ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">wangsx@SC-201708020022:~/tmp$ getopt ab:cd -a -b test1 -cde test2 test3
getoptï¼šæ— æ•ˆé€‰é¡¹ -- e
 -a -b test1 -c -d -- test2 test3
wangsx@SC-201708020022:~/tmp$ getopt -q ab:cd -a -b test1 -cde test2 test3
 -a -b <span style="color:#e6db74">&#39;test1&#39;</span> -c -d -- <span style="color:#e6db74">&#39;test2&#39;</span> <span style="color:#e6db74">&#39;test3&#39;</span>
</code></pre></div><p><strong>åœ¨è„šæœ¬ä¸­ç”¨getopt</strong></p>
<p>ç”¨æ³•ç¨å¾®æœ‰ç‚¹å¤æ‚ï¼Œæ–¹æ³•æ˜¯ç”¨<code>getopt</code>å‘½ä»¤ç”Ÿæˆçš„æ ¼å¼åŒ–åçš„ç‰ˆæœ¬æ›¿æ¢å·²æœ‰çš„å‘½ä»¤è¡Œé€‰é¡¹å’Œå‚æ•°ã€‚ç”¨<code>set</code>å¯ä»¥åšåˆ°ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">set -- <span style="color:#66d9ef">$(</span>getopt -q ab:cd <span style="color:#e6db74">&#34;</span>$@<span style="color:#e6db74">)
</span></code></pre></div><p><code>set</code>å‘½ä»¤çš„é€‰é¡¹ä¹‹ä¸€æ˜¯<code>--</code>ï¼Œå®ƒä¼šå°†å‘½ä»¤è¡Œå‚æ•°æ›¿æ¢æˆ<code>set</code>å‘½ä»¤çš„å‘½ä»¤è¡Œå€¼ã€‚</p>
<p>è¯¥æ–¹æ³•ä¼šå°†åŸå§‹è„šæœ¬çš„å‘½ä»¤è¡Œå‚æ•°ä¼ ç»™<code>getopt</code>å‘½ä»¤ï¼Œä¹‹åå°†<code>getopt</code>å‘½ä»¤çš„è¾“å‡ºä¼ ç»™<code>set</code>å‘½ä»¤ï¼Œç”¨<code>getopt</code>æ ¼å¼åŒ–çš„å‘½ä»¤è¡Œå‚æ•°æ¥æ›¿æ¢åŸå§‹çš„å‘½ä»¤è¡Œå‚æ•°ã€‚</p>
<p>ç°åœ¨å†™ä¸‹å¤„ç†å‘½ä»¤è¡Œå‚æ•°çš„è„šæœ¬å§ï¼š</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">wangsx@SC-201708020022:~/tmp$ cat test18.sh
<span style="color:#75715e">#!/bin/bash</span>
<span style="color:#75715e"># Extract command line options &amp; values with getopt</span>
#
set -- <span style="color:#66d9ef">$(</span>getopt -q ab:cd <span style="color:#e6db74">&#34;</span>$@<span style="color:#e6db74">&#34;</span><span style="color:#66d9ef">)</span>
#
echo
<span style="color:#66d9ef">while</span> <span style="color:#f92672">[</span> -n <span style="color:#e6db74">&#34;</span>$1<span style="color:#e6db74">&#34;</span> <span style="color:#f92672">]</span>
<span style="color:#66d9ef">do</span>
    <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#34;</span>$1<span style="color:#e6db74">&#34;</span> in
        -a<span style="color:#f92672">)</span> echo <span style="color:#e6db74">&#34;Found the -a option&#34;</span>;;
        -b<span style="color:#f92672">)</span> param<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span>$2<span style="color:#e6db74">&#34;</span>
            echo <span style="color:#e6db74">&#34;Found the -b option, with parameter value </span>$param<span style="color:#e6db74">&#34;</span>
            shift ;;
        -c<span style="color:#f92672">)</span> echo <span style="color:#e6db74">&#34;Found the -c option&#34;</span>;;
        --<span style="color:#f92672">)</span> shift
            break ;;
        *<span style="color:#f92672">)</span> echo <span style="color:#e6db74">&#34;</span>$1<span style="color:#e6db74"> is not an option&#34;</span>
    <span style="color:#66d9ef">esac</span>
    shift
<span style="color:#66d9ef">done</span>
#
count<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>
<span style="color:#66d9ef">for</span> param in <span style="color:#e6db74">&#34;</span>$@<span style="color:#e6db74">&#34;</span>
<span style="color:#66d9ef">do</span>
    echo <span style="color:#e6db74">&#34;Parameter #</span>$count<span style="color:#e6db74">: </span>$param<span style="color:#e6db74">&#34;</span>
    count<span style="color:#f92672">=</span>$<span style="color:#f92672">[</span> $count + <span style="color:#ae81ff">1</span> <span style="color:#f92672">]</span>
<span style="color:#66d9ef">done</span>
#
</code></pre></div><p>å¯ä»¥çœ‹åˆ°å®ƒè·Ÿ<code>test17.sh</code>ä¸åŒçš„åœ°æ–¹æ˜¯åŠ å…¥äº†<code>getopt</code>å‘½ä»¤æ¥å¸®åŠ©æ ¼å¼åŒ–å‘½ä»¤è¡Œå‚æ•°ã€‚</p>
<p>ä¸‹é¢æµ‹è¯•å‘ç°æ–°åŠ çš„åŠŸèƒ½å®ç°äº†ï¼Œä¹‹å‰çš„ä¹Ÿæ²¡é—®é¢˜ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">wangsx@SC-201708020022:~/tmp$ ./test18.sh -ac

Found the -a option
Found the -c option
wangsx@SC-201708020022:~/tmp$ ./test18.sh -a -b test1 -cd  test2 test3 test4

Found the -a option
Found the -b option, with parameter value <span style="color:#e6db74">&#39;test1&#39;</span>
Found the -c option
-d is not an option
Parameter <span style="color:#75715e">#1: &#39;test2&#39;</span>
Parameter <span style="color:#75715e">#2: &#39;test3&#39;</span>
Parameter <span style="color:#75715e">#3: &#39;test4&#39;</span>
</code></pre></div><p>ç›¸å½“ä¸é”™å•¦ã€‚ä¸è¿‡<code>getopt</code>å‘½ä»¤éšè—ä¸€ä¸ªé—®é¢˜ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">wangsx@SC-201708020022:~/tmp$ ./test18.sh -a -b test1 -cd  <span style="color:#e6db74">&#34;test2 test3&#34;</span> test4

Found the -a option
Found the -b option, with parameter value <span style="color:#e6db74">&#39;test1&#39;</span>
Found the -c option
-d is not an option
Parameter <span style="color:#75715e">#1: &#39;test2</span>
Parameter <span style="color:#75715e">#2: test3&#39;</span>
Parameter <span style="color:#75715e">#3: &#39;test4&#39;</span>
</code></pre></div><p><code>getopt</code>å‘½ä»¤å¹¶ä¸æ“…é•¿å¤„ç†å¸¦ç©ºæ ¼å’Œå¼•å·çš„å‚æ•°å€¼ã€‚å®ƒä¼šå°†ç©ºæ ¼å½“ä½œå‚æ•°åˆ†éš”ç¬¦ï¼Œè€Œä¸æ˜¯æ ¹æ®åŒå¼•å·å°†ä¸¤è€…å½“ä½œä¸€ä¸ªå‚æ•°ã€‚</p>
<p>å¹¸è€Œè¿˜æœ‰åŠæ³•èƒ½å¤Ÿè§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<h3 id="ä½¿ç”¨æ›´é«˜çº§çš„getopts">ä½¿ç”¨æ›´é«˜çº§çš„getopts</h3>
<p><code>getopts</code>å‘½ä»¤å†…å»ºäºbash shellã€‚å®ƒæ¯”<code>getopt</code>å¤šä¸€äº›æ‰©å±•åŠŸèƒ½ã€‚</p>
<p><code>getopts</code>å‘½ä»¤æ ¼å¼å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">getopts optstring variable
</code></pre></div><p><code>optstring</code>å€¼ç±»ä¼¼äº<code>getopt</code>å‘½ä»¤ä¸­çš„é‚£ä¸ªã€‚è¦å»æ‰é”™è¯¯ä¿¡æ¯çš„è¯ï¼Œå¯ä»¥åœ¨<code>optstring</code>ä¹‹å‰åŠ ä¸€ä¸ªå†’å·ã€‚<code>getopts</code>å‘½ä»¤å°†å½“å‰å‚æ•°ä¿å­˜åœ¨å‘½ä»¤è¡Œä¸­å®šä¹‰çš„<code>variable</code>ä¸­ã€‚</p>
<p><strong>è¯¥å‘½ä»¤ä¼šç”¨åˆ°ä¸¤ä¸ªç¯å¢ƒå˜é‡ã€‚å¦‚æœé€‰é¡¹éœ€è¦è·Ÿä¸€ä¸ªå‚æ•°å€¼ï¼Œ<code>OPTARG</code>ç¯å¢ƒå˜é‡å°±ä¼šä¿å­˜è¿™ä¸ªå€¼ã€‚<code>OPTIND</code>ç¯å¢ƒå˜é‡ä¿å­˜äº†å‚æ•°åˆ—è¡¨ä¸­<code>getopts</code>æ­£åœ¨å¤„ç†çš„å‚æ•°ä½ç½®ã€‚è¿™æ ·ä½ å°±èƒ½åœ¨å¤„ç†é€‰é¡¹ä¹‹åç»§ç»­å¤„ç†å…¶ä»–å‘½ä»¤è¡Œå‚æ•°äº†ã€‚</strong></p>
<p>ç©ºè¯´æ— ç›Šï¼Œè¿˜æ˜¯æ¥ç»ƒç»ƒã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">wangsx@SC-201708020022:~/tmp$ cat test19.sh
<span style="color:#75715e">#!/bin/bash</span>
<span style="color:#75715e"># Simple demonstration of the getopts command</span>
#
echo
<span style="color:#66d9ef">while</span> getopts ğŸ†c opt
<span style="color:#66d9ef">do</span>
    <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#34;</span>$opt<span style="color:#e6db74">&#34;</span> in
       a<span style="color:#f92672">)</span> echo <span style="color:#e6db74">&#34;Found the -a option&#34;</span> ;;
       b<span style="color:#f92672">)</span> echo <span style="color:#e6db74">&#34;Found the -b option, with value </span>$OPTARG<span style="color:#e6db74">&#34;</span>;;
       c<span style="color:#f92672">)</span> echo <span style="color:#e6db74">&#34;Found the -c option&#34;</span>;;
       *<span style="color:#f92672">)</span> echo <span style="color:#e6db74">&#34;Unknown option: </span>$opt<span style="color:#e6db74">&#34;</span>;;
   <span style="color:#66d9ef">esac</span>
<span style="color:#66d9ef">done</span>
wangsx@SC-201708020022:~/tmp$ ./test19.sh -ab test1 -c

Found the -a option
Found the -b option, with value test1
Found the -c option
</code></pre></div><p><code>while</code>è¯­å¥å®šä¹‰äº†<code>getopts</code>å‘½ä»¤ï¼ŒæŒ‡æ˜äº†è¦æŸ¥æ‰¾å“ªäº›å‘½ä»¤è¡Œé€‰é¡¹ï¼Œä»¥åŠæ¯æ¬¡è¿­ä»£ä¸­å­˜å‚¨å®ƒä»¬çš„å˜é‡åï¼ˆ<code>opt</code>ï¼‰ã€‚</p>
<p><code>getopts</code>è¿è¡Œæ—¶ï¼Œå®ƒä¸€æ¬¡åªå¤„ç†å‘½ä»¤è¡Œä¸Šæ£€æµ‹åˆ°çš„ä¸€ä¸ªå‚æ•°ã€‚å¤„ç†å®Œæ‰€æœ‰å‚æ•°åï¼Œå®ƒä¼šé€€å‡ºå¹¶è¿”å›ä¸€ä¸ªå¤§äº0çš„é€€å‡ºçŠ¶æ€ç ã€‚è¿™è®©å®ƒéå¸¸é€‚åˆç”¨äºè§£æå‘½ä»¤è¡Œæ‰€æœ‰çš„å‚æ•°çš„å¾ªç¯ä¸­ã€‚</p>
<p>è¿™é‡Œæˆ‘ä»¬å¯ä»¥å·²ç»æ³¨æ„åˆ°äº†ä¾‹å­ä¸­çš„<code>case</code>ç”¨æ³•å’Œä¹‹å‰ä¸åŒã€‚<code>getopts</code>å‘½ä»¤è§£æå‘½ä»¤è¡Œé€‰é¡¹æ—¶ä¼šç§»é™¤å¼€å¤´çš„å•ç ´æŠ˜å·ï¼Œæ‰€ä»¥åœ¨<code>case</code>å®šä¹‰ä¸­ä¸ç”¨å•ç ´æŠ˜å·äº†ã€‚</p>
<p>ä¸Šä¸€å°èŠ‚æœ«å°¾æˆ‘ä»¬é‡åˆ°çš„é—®é¢˜å¯ä»¥å¾ˆå¥½çš„è§£å†³äº†ï¼š</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">wangsx@SC-201708020022:~/tmp$ ./test19.sh -ab <span style="color:#e6db74">&#34;test1 test2&#34;</span> -c

Found the -a option
Found the -b option, with value test1 test2
Found the -c option
</code></pre></div><p>å¦ä¸€ä¸ªå¥½ç”¨çš„åŠŸèƒ½æ˜¯èƒ½å¤Ÿå°†é€‰é¡¹å­—æ¯å’Œå‚æ•°å€¼æ”¾åœ¨ä¸€èµ·ï¼Œè€Œä¸”ä¸ç”¨åŠ ç©ºæ ¼ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">wangsx@SC-201708020022:~/tmp$ ./test19.sh -abtest1

Found the -a option
Found the -b option, with value test1
</code></pre></div><p>é™¤æ­¤ä¹‹å¤–ï¼Œ<code>getopts</code>è¿˜èƒ½å¤Ÿå°†å‘½ä»¤è¡Œä¸Šæ‰¾åˆ°çš„æ‰€æœ‰æœªå®šä¹‰çš„é€‰é¡¹ç»Ÿä¸€è¾“å‡ºæˆé—®å·ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">wangsx@SC-201708020022:~/tmp$ ./test19.sh -d

Unknown option: ?
wangsx@SC-201708020022:~/tmp$ ./test19.sh -acde

Found the -a option
Found the -c option
Unknown option: ?
Unknown option: ?
</code></pre></div><p><code>getopts</code>å‘½ä»¤çŸ¥é“ä½•æ—¶åœæ­¢å¤„ç†é€‰é¡¹ï¼Œå¹¶å°†å‚æ•°ç•™ç»™ä½ å¤„ç†ã€‚åœ¨<code>getopts</code>å¤„ç†æ¯ä¸€ä¸ªé€‰é¡¹æ—¶ï¼Œå®ƒä¼šå°†<code>OPTIND</code>ç¯å¢ƒå˜é‡å€¼å¢ä¸€ã€‚åœ¨<code>getopts</code>å®Œæˆå¤„ç†åï¼Œä½ å¯ä»¥ä½¿ç”¨<code>shift</code>å‘½ä»¤å’Œ<code>OPTIND</code>å€¼æ¥ç§»åŠ¨å‚æ•°ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">wangsx@SC-201708020022:~/tmp$ cat test20.sh
<span style="color:#75715e">#!/bin/bash</span>
<span style="color:#75715e"># Processing options &amp; parameters with getopts</span>
#
echo
<span style="color:#66d9ef">while</span> getopts ğŸ†cd opt
<span style="color:#66d9ef">do</span>
    <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#34;</span>$opt<span style="color:#e6db74">&#34;</span> in
        a<span style="color:#f92672">)</span> echo <span style="color:#e6db74">&#34;Found the -a option&#34;</span> ;;
        b<span style="color:#f92672">)</span> echo <span style="color:#e6db74">&#34;Found the -a option, with value </span>$OPTARG<span style="color:#e6db74">&#34;</span> ;;
        c<span style="color:#f92672">)</span> echo <span style="color:#e6db74">&#34;Found the -c option&#34;</span> ;;
        d<span style="color:#f92672">)</span> echo <span style="color:#e6db74">&#34;Found the -d option&#34;</span> ;;
        *<span style="color:#f92672">)</span> echo <span style="color:#e6db74">&#34;Unknown option: </span>$opt<span style="color:#e6db74">&#34;</span> ;;
    <span style="color:#66d9ef">esac</span>
<span style="color:#66d9ef">done</span>
#
shift $<span style="color:#f92672">[</span> $OPTIND -1 <span style="color:#f92672">]</span>
#
echo
count<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>
<span style="color:#66d9ef">for</span> param in  <span style="color:#e6db74">&#34;</span>$@<span style="color:#e6db74">&#34;</span>
<span style="color:#66d9ef">do</span>
    echo <span style="color:#e6db74">&#34;Parameter </span>$count<span style="color:#e6db74">: </span>$param<span style="color:#e6db74">&#34;</span>
    count<span style="color:#f92672">=</span>$<span style="color:#f92672">[</span> $count + <span style="color:#ae81ff">1</span> <span style="color:#f92672">]</span>
<span style="color:#66d9ef">done</span>

wangsx@SC-201708020022:~/tmp$ ./test20.sh -a -b test1 -d test2 test3 test4

Found the -a option
Found the -a option, with value test1
Found the -d option

Parameter 1: test2
Parameter 2: test3
Parameter 3: test4
</code></pre></div><p>è¿™é‡Œ<code>shift $[ $OPTIND -1 ]</code>éœ€è¦è§£é‡Šä»¥ä¸‹ï¼šå‰é¢æåˆ°<code>OPTIND</code>åœ¨<code>getopts</code>æ¯æ¬¡å¤„ç†æ‰ä¸€ä¸ªå‚æ•°åä¼šåŠ 1ã€‚æ¯”å¦‚<code>./test20.sh -a -b test1 -d test2 test3 test4</code>å‰é¢é”®å…¥äº†4ä¸ªå‚æ•°ï¼Œé€‰é¡¹å¤„ç†å®Œæˆå<code>OPTIND</code>çš„å€¼ä¸º5ã€‚å®ƒä¼šæŒ‡å‘<code>$5</code>ï¼Œå³ç¬¬5ä¸ªå‚æ•°ï¼Œåé¢ä¸ºäº†å€¼å‰©ä¸‹å‘½ä»¤è¡Œå‚æ•°ï¼Œæ‰€ä»¥å»æ‰æ‰€æœ‰çš„é€‰é¡¹ï¼ˆåŠå¸¦çš„å‚æ•°ï¼‰ï¼Œæ‰€ä»¥ç”¨<code>shift $[ $OPTIND - 1]</code>å‘½ä»¤ã€‚</p>
<h2 id="å°†é€‰é¡¹æ ‡å‡†åŒ–">å°†é€‰é¡¹æ ‡å‡†åŒ–</h2>
<p>æœ‰äº›å­—æ¯åœ¨Linuxä¸–ç•Œé‡Œå·²ç»æ‹¥æœ‰äº†æŸç§ç¨‹åº¦çš„æ ‡å‡†å«ä¹‰ã€‚å¦‚æœæˆ‘ä»¬èƒ½åœ¨shelljiå¥¥æœ¬ä¸­æ”¯æŒè¿™äº›é€‰é¡¹ï¼Œè„šæœ¬çœ‹èµ·æ¥ä¼šæ›´åŠ å‹å¥½ã€‚</p>
<p>ä¸‹é¢è¡¨æ ¼åˆ—å‡ºä¸€äº›å‘½ä»¤è¡Œé€‰é¡¹çš„å¸¸ç”¨å«ä¹‰</p>
<table>
<thead>
<tr>
<th align="center">é€‰é¡¹</th>
<th align="center">æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">-a</td>
<td align="center">æ˜¾ç¤ºæ‰€æœ‰å¯¹è±¡</td>
</tr>
<tr>
<td align="center">-c</td>
<td align="center">ç”Ÿæˆä¸€ä¸ªè®¡æ•°</td>
</tr>
<tr>
<td align="center">-d</td>
<td align="center">æŒ‡å®šä¸€ä¸ªç›®å½•</td>
</tr>
<tr>
<td align="center">-e</td>
<td align="center">æ‰©å±•ä¸€ä¸ªå¯¹è±¡</td>
</tr>
<tr>
<td align="center">-f</td>
<td align="center">æŒ‡å®šè¯»å…¥æ•°æ®çš„æ–‡ä»¶</td>
</tr>
<tr>
<td align="center">-h</td>
<td align="center">æ˜¾ç¤ºå‘½ä»¤çš„å¸®åŠ©ä¿¡æ¯</td>
</tr>
<tr>
<td align="center">-i</td>
<td align="center">å¿½ç•¥æ–‡æœ¬å¤§å°å†™</td>
</tr>
<tr>
<td align="center">-l</td>
<td align="center">äº§ç”Ÿè¾“å‡ºçš„é•¿æ ¼å¼ç‰ˆæœ¬</td>
</tr>
<tr>
<td align="center">-n</td>
<td align="center">ä½¿ç”¨éäº¤äº’æ¨¡å¼ï¼ˆæ‰¹å¤„ç†ï¼‰</td>
</tr>
<tr>
<td align="center">-o</td>
<td align="center">å°†æ‰€æœ‰è¾“å‡ºé‡å®šå‘åˆ°æŒ‡å®šçš„è¾“å‡ºæ–‡ä»¶</td>
</tr>
<tr>
<td align="center">-q</td>
<td align="center">ä»¥å®‰é™æ¨¡å¼è¿è¡Œ</td>
</tr>
<tr>
<td align="center">-r</td>
<td align="center">é€’å½’åœ°å¤„ç†ç›®å½•å’Œæ–‡ä»¶</td>
</tr>
<tr>
<td align="center">-s</td>
<td align="center">ä»¥å®‰é™æ¨¡å¼è¿è¡Œ</td>
</tr>
<tr>
<td align="center">-v</td>
<td align="center">ç”Ÿæˆè¯¦ç»†è¾“å‡º</td>
</tr>
<tr>
<td align="center">-x</td>
<td align="center">æ’é™¤æŸä¸ªå¯¹è±¡</td>
</tr>
<tr>
<td align="center">-y</td>
<td align="center">å¯¹æ‰€æœ‰é—®é¢˜ç­”yes</td>
</tr>
</tbody>
</table>
<h2 id="è·å¾—ç”¨æˆ·è¾“å…¥">è·å¾—ç”¨æˆ·è¾“å…¥</h2>
<p>æœ‰æ—¶è„šæœ¬åœ°äº¤äº’æ€§è¿˜éœ€è¦æ›´å¼ºä¸€äº›ã€‚æ¯”å¦‚ä½ æƒ³è¦åœ¨è„šæœ¬è¿è¡Œæ—¶é—®ä¸ªé—®é¢˜ï¼Œå¹¶ç­‰å¾…è¿è¡Œè„šæœ¬åœ°äººæ¥å›ç­”ã€‚bash shellä¸ºæ­¤æä¾›äº†readå‘½ä»¤ã€‚</p>
<h3 id="åŸºæœ¬çš„è¯»å…¥">åŸºæœ¬çš„è¯»å…¥</h3>
<p><code>read</code>å‘½ä»¤ä»æ ‡å‡†è¾“å…¥ï¼ˆé”®ç›˜ï¼‰æˆ–å¦ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ä¸­æ¥å—è¾“å…¥ã€‚åœ¨æ”¶åˆ°è¾“å…¥åï¼Œ<code>read</code>å‘½ä»¤ä¼šå°†æ•°æ®æ”¾è¿›ä¸€ä¸ªå˜é‡ã€‚</p>
<p>ç®€å•ç”¨æ³•å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">wangsx@SC-201708020022:~/tmp$ cat test21.sh
<span style="color:#75715e">#!/bin/bash</span>
<span style="color:#75715e"># testing the read -p option</span>
#
read -p <span style="color:#e6db74">&#34;Please enter your age: &#34;</span> age
#
days<span style="color:#f92672">=</span>$<span style="color:#f92672">[</span> $age * <span style="color:#ae81ff">365</span> <span style="color:#f92672">]</span>
echo <span style="color:#e6db74">&#34;That makes you over </span>$days<span style="color:#e6db74"> days old!&#34;</span>
#
wangsx@SC-201708020022:~/tmp$ ./test21.sh
Please enter your age: <span style="color:#ae81ff">23</span>
That makes you over <span style="color:#ae81ff">8395</span> days old!
</code></pre></div><p><code>read</code>å‘½ä»¤ä¼šå°†æç¤ºç¬¦åè¾“å…¥çš„æ‰€æœ‰æ•°æ®åˆ†é…ç»™å•ä¸ªå˜é‡ï¼Œè¦ä¹ˆæˆ‘ä»¬éœ€è¦æŒ‡å®šå¤šä¸ªå˜é‡ã€‚å½“å˜é‡æ•°é‡ä¸å¤Ÿæ—¶ï¼Œå‰©ä¸‹çš„æ•°æ®å°±å…¨éƒ¨åˆ†é…ç»™æœ€åä¸€ä¸ªå˜é‡ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">wangsx@SC-201708020022:~/tmp$ cat test22.sh
<span style="color:#75715e">#!/bin/bash</span>
<span style="color:#75715e"># entering multiple variable</span>
#
read -p <span style="color:#e6db74">&#34;Enter your name: &#34;</span> first last
echo <span style="color:#e6db74">&#34;Checking data for </span>$last<span style="color:#e6db74">, </span>$first<span style="color:#e6db74">...&#34;</span>

wangsx@SC-201708020022:~/tmp$ ./test22.sh
Enter your name: shixiang wang
Checking data <span style="color:#66d9ef">for</span> wang, shixiang...
wangsx@SC-201708020022:~/tmp$ ./test22.sh
Enter your name: shixiang wang hhhhh
Checking data <span style="color:#66d9ef">for</span> wang hhhhh, shixiang...
</code></pre></div><p>ä¹Ÿå¯ä»¥åœ¨<code>read</code>å‘½ä»¤è¡Œä¸­ä¸æŒ‡å®šå˜é‡ã€‚å¦‚æœè¿™æ ·çš„è¯ï¼Œ<code>read</code>å‘½ä»¤ä¼šå°†å®ƒæ”¶åˆ°çš„ä»»ä½•æ•°æ®éƒ½æ”¾è¿›ç‰¹æ®Šç¯å¢ƒå˜é‡<code>REPLY</code>ä¸­ã€‚æˆ‘ä»¬ç›´æ¥å¯ä»¥ä½¿ç”¨å®ƒã€‚</p>
<h3 id="è¶…æ—¶">è¶…æ—¶</h3>
<p>è„šæœ¬å¾ˆå¯èƒ½ä¸€ç›´è‹¦è‹¦ç­‰å¾…è„šæœ¬ç”¨æˆ·çš„è¾“å…¥ã€‚å¦‚æœä¸ç®¡æ•°æ®æ˜¯å¦è¾“å…¥ï¼Œè„šæœ¬éƒ½æ‰§è¡Œçš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨<code>-t</code>é€‰é¡¹è®¾å®šä¸€ä¸ªè®¡æ—¶å™¨ã€‚<code>-t</code>æŒ‡å®š<code>read</code>å‘½ä»¤ç­‰å¾…çš„ç§’æ•°ï¼Œè®¡æ•°å®Œæˆåï¼Œ<code>read</code>å‘½ä»¤ä¼šè¿”å›ä¸€ä¸ªéé›¶é€€å‡ºçŠ¶æ€ç ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">wangsx@SC-201708020022:~/tmp$ cat test23.sh
<span style="color:#75715e">#!/bin/bash</span>
<span style="color:#75715e"># timing the data entry</span>
#
<span style="color:#66d9ef">if</span> read -t <span style="color:#ae81ff">5</span> -p <span style="color:#e6db74">&#34;Please enter your name: &#34;</span> name
<span style="color:#66d9ef">then</span>
    echo <span style="color:#e6db74">&#34;Hello </span>$name<span style="color:#e6db74">, welcome to my script&#34;</span>
<span style="color:#66d9ef">else</span>
    echo
    echo <span style="color:#e6db74">&#34;Sorry, too slow!&#34;</span>
<span style="color:#66d9ef">fi</span>

wangsx@SC-201708020022:~/tmp$ ./test23.sh
Please enter your name: shixiang wang
Hello shixiang wang, welcome to my script
wangsx@SC-201708020022:~/tmp$ ./test23.sh <span style="color:#75715e"># è¿™é‡Œè¾“å…¥åç­‰ä»¥ä¸‹ ä¸è¦è¾“å…¥</span>
Please enter your name:
Sorry, too slow!
</code></pre></div><p>ä¹Ÿå¯ä»¥ä¸å¯¹è¾“å…¥è¿‡ç¨‹è®¡æ—¶ï¼Œè€Œæ—¶è®©<code>read</code>å‘½ä»¤æ¥ç»Ÿè®¡è¾“å…¥çš„å­—ç¬¦æ•°ã€‚å½“è¾“å…¥çš„å­—ç¬¦æ•°è¾¾åˆ°é¢„è®¾çš„å­—ç¬¦æ•°æ—¶ï¼Œå°±è‡ªåŠ¨é€€å‡ºï¼Œå°†è¾“å…¥çš„æ•°æ®èµ‹å€¼ç»™å˜é‡ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">wangsx@SC-201708020022:~/tmp$ cat test24.sh
<span style="color:#75715e">#!/bin/bash</span>
<span style="color:#75715e"># getting just one character of input</span>
#
read -n1 -p <span style="color:#e6db74">&#34;Do you want to continue [Y/N]? &#34;</span> answer
<span style="color:#66d9ef">case</span> $answer in
    Y | y <span style="color:#f92672">)</span> echo
            echo <span style="color:#e6db74">&#34;fine, continue on...&#34;</span>;;
    N | n <span style="color:#f92672">)</span> echo
            echo OK, goodbye
            exit;;
<span style="color:#66d9ef">esac</span>
echo <span style="color:#e6db74">&#34;This is the end of the script.&#34;</span>
wangsx@SC-201708020022:~/tmp$ ./test24.sh
Do you want to <span style="color:#66d9ef">continue</span> <span style="color:#f92672">[</span>Y/N<span style="color:#f92672">]</span>? Y
fine, <span style="color:#66d9ef">continue</span> on...
This is the end of the script.
wangsx@SC-201708020022:~/tmp$ ./test24.sh
Do you want to <span style="color:#66d9ef">continue</span> <span style="color:#f92672">[</span>Y/N<span style="color:#f92672">]</span>? n
OK, goodbye
</code></pre></div><h3 id="éšè—æ–¹å¼è¯»å–">éšè—æ–¹å¼è¯»å–</h3>
<p>è¿™ç§æ–¹å¼è¾“å…¥å¯†ç çš„æ—¶å€™æœ‰ç”¨ã€‚</p>
<p><code>-s</code>é€‰é¡¹å¯ä»¥é¿å…åœ¨<code>read</code>å‘½ä»¤è¾“å…¥çš„æ•°æ®å‡ºç°åœ¨æ˜¾ç¤ºå™¨ä¸Šï¼ˆå®é™…ä¸Šï¼Œæ•°æ®ä¼šè¢«æ˜¾ç¤ºï¼Œåªæ˜¯<code>read</code>å‘½ä»¤ä¼šå°†æ–‡æœ¬é¢œè‰²è®¾æˆè·ŸèƒŒæ™¯è‰²ä¸€æ ·ï¼‰ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">wangsx@SC-201708020022:~/tmp$ cat test25.sh
<span style="color:#75715e">#!/bin/bash</span>
<span style="color:#75715e"># hiding input data from the monitor</span>
#
read -s -p <span style="color:#e6db74">&#34;Enter your password: &#34;</span> pass
echo
echo <span style="color:#e6db74">&#34;Is your password really </span>$pass<span style="color:#e6db74">?&#34;</span>
wangsx@SC-201708020022:~/tmp$ ./test25.sh
Enter your password:
Is your password really what?
wangsx@SC-201708020022:~/tmp$ ./test25.sh
Enter your password:
Is your password really shixiang?
</code></pre></div><h3 id="ä»æ–‡ä»¶ä¸­è¯»å–">ä»æ–‡ä»¶ä¸­è¯»å–</h3>
<p>å½“ç„¶ï¼Œ<code>read</code>ä¹Ÿå¯ä»¥ä»ç³»ç»Ÿæ–‡ä»¶ä¸­è¯»å–æ•°æ®ã€‚æ¯æ¬¡è°ƒç”¨<code>read</code>å‘½ä»¤ï¼Œå®ƒéƒ½ä¼šè¯»å–ä¸€è¡Œæ–‡æœ¬ã€‚å½“è¯»å®Œåï¼Œ<code>read</code>å‘½ä»¤ä¼šé€€å‡ºå¹¶è¿”å›éé›¶é€€å‡ºçŠ¶æ€ç ã€‚</p>
<p>æœ€å¸¸è§çš„æ–¹æ³•æ—¶å¯¹æ–‡æœ¬ä½¿ç”¨<code>cat</code>å‘½ä»¤ï¼Œå°†ç»“æœé€šè¿‡ç®¡é“ç›´æ¥ä¼ ç»™å«<code>read</code>å‘½ä»¤çš„<code>while</code>å‘½ä»¤ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">wangsx@SC-201708020022:~/tmp$ cat test26.sh
<span style="color:#75715e">#!/bin/bash</span>
<span style="color:#75715e"># reading data from a file</span>
#
count<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>
cat test | <span style="color:#66d9ef">while</span> read line
<span style="color:#66d9ef">do</span>
    echo <span style="color:#e6db74">&#34;Line </span>$count<span style="color:#e6db74">: </span>$line<span style="color:#e6db74">&#34;</span>
    count<span style="color:#f92672">=</span>$<span style="color:#f92672">[</span> $count + <span style="color:#ae81ff">1</span> <span style="color:#f92672">]</span>
<span style="color:#66d9ef">done</span>
echo <span style="color:#e6db74">&#34;Finished processing the file&#34;</span>

wangsx@SC-201708020022:~/tmp$ cat test
The quick brown dog jumps over the lazy fox.
This is a test, this is only a test.
O Romeo, Romeo! Wherefore art thou Romeo?
wangsx@SC-201708020022:~/tmp$ ./test26.sh
Line 1: The quick brown dog jumps over the lazy fox.
Line 2: This is a test, this is only a test.
Line 3: O Romeo, Romeo! Wherefore art thou Romeo?
Finished processing the file
</code></pre></div><hr>
<p>å†™shellè„šæœ¬çš„åŸºæœ¬å†…å®¹å¤§ä½“å·²ç»æ•´å®Œäº†ï¼Œæˆ‘è‡ªå·±ä¹Ÿæ˜¯è¾¹çœ‹è¾¹æƒ³è¾¹ç è¿‡æ¥çš„ã€‚shellåšå¤§ç²¾æ·±ï¼Œæ›´å¤šé«˜çº§å†…å®¹æœ‰å¾…ç»§ç»­å­¦ä¹ æ•´ç†ã€‚ç å­—å®å±ä¸æ˜“ï¼Œè§‰å¾—å†…å®¹è¿˜è¡Œçš„ç‚¹èµæ”¯æŒä¸‹å§~</p>


  <footer>
  
<nav class="post-nav">
  <span class="nav-prev">&larr; <a href="../../../cn/post/2017-08-11-structural-command-of-shell/">Linuxç»“æ„åŒ–å‘½ä»¤</a></span>
  <span class="nav-next"><a href="../../../cn/post/2017-08-22-shell-show-data/">Linuxè„šæœ¬ç¼–ç¨‹â€”â€”å‘ˆç°æ•°æ®</a> &rarr;</span>
</nav>
<script type="text/javascript">
document.addEventListener('keyup', function(e) {
  if (e.target.nodeName.toUpperCase() != 'BODY') return;
  var url = false;
  if (e.which == 37) {  
    
    url = '\/cn\/post\/2017-08-11-structural-command-of-shell\/';
    
  } else if (e.which == 39) {  
    
    url = '\/cn\/post\/2017-08-22-shell-show-data\/';
    
  }
  if (url) window.location = url;
});
</script>





<div id="gitalk-container"></div>
<link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
<script src="https://cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.js"></script>
<script>
  const gitalk = new Gitalk({
    clientID: 'eed477936be7b88a8455',
    clientSecret: '32b5dde22f3c95c4fad400a31632e34221b07e83',
    repo: 'home',
    owner: 'ShixiangWang',
    admin: ['ShixiangWang'],
    id: md5(window.location.pathname), 
    distractionFreeMode: false 
  });
  (function() {
    if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
      document.getElementById('gitalk-container').innerHTML = 'Gitalk comments not available by default when the website is previewed locally.';
      return;
    }
    gitalk.render('gitalk-container');
  })();
</script>





<script async src="../../../js/fix-toc.js"></script>

<script async src="../../../js/center-img.js"></script>

<script async src="../../../js/right-quote.js"></script>

<script async src="../../../js/no-highlight.js"></script>

<script async src="../../../js/fix-footnote.js"></script>

<script async src="../../../js/math-code.js"></script>

<script async src="../../../js/external-link.js"></script>

<script async src="../../../js/alt-title.js"></script>

<script async src="../../../js/header-link.js"></script>


<script src="//yihui.org/js/math-code.js"></script>
<script async src="//cdn.bootcss.com/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script async src="//yihui.org/js/center-img.js"></script>

  



<script src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>



<script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/r.min.js"></script>
<script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/yaml.min.js"></script>
<script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/tex.min.js"></script>
<script>hljs.configure({languages: []}); hljs.initHighlightingOnLoad();</script>




  
  
  

  <div class="copyright"><a href="mailto:w_shixiang@163.com"><i class='far fa-envelope fa-1x'></i></a> Â· <a href="https://github.com/ShixiangWang"><i class='fab fa-github fa-1x'></i></a> Â· <a href="https://stackoverflow.com/users/7662327/shixiang-wang"><i class='fab fa-stack-overflow fa-1x'></i></a> Â· <a href="https://scholar.google.com/citations?user=FvNp0NkAAAAJ&amp;hl=zh-CN"><i class='ai ai-google-scholar ai-1x'></i></a> Â· <a href="https://orcid.org/0000-0001-9855-7357"><i class='ai ai-orcid ai-1x'></i></a> Â· <a href="https://www.researchgate.net/profile/Wang_Shixiang4"><i class='ai ai-researchgate ai-1x'></i></a> <br> æœ¬ç«™ç”± <a href="https://gohugo.io">Hugo</a> å’Œ <a href="https://bookdown.org/yihui/blogdown/">Blogdown</a> å¼ºåŠ›é©±åŠ¨ Â© <a href="../../../">ç‹è¯—ç¿”</a> 2017 - 2020 </div>
  
  

  <script type="text/javascript" src="//rf.revolvermaps.com/0/0/6.js?i=56h9es09xn7&amp;m=6&amp;c=ff0000&amp;cr1=ffffff&amp;f=arial&amp;l=1" async="async"></script>
  </footer>
  </article>
  
  </body>
</html>

